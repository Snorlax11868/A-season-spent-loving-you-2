<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>A Season Spent Loving You</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    /* Global + background */
    html, body {
      margin:0; padding:0;
      font-family:'Playfair Display', serif;
      background:#f9f6f3; color:#111;
      height:100vh; position:relative;
      overflow:hidden;
      transition: background .5s, color .5s;
    }
    body.dark-mode {
      background:#1a1a1d; color:#eaeaea;
    }

    /* Light-mode petal animation */
    #petal-bg {
      position:absolute; top:0; left:0; right:0; bottom:0;
      pointer-events:none; z-index:-2;
      background:url('petal.png') repeat; /* your petal sprite */
      animation: drift 20s linear infinite;
    }
    @keyframes drift {
      from { background-position: 0 0; }
      to   { background-position: 0 -1000px; }
    }

    /* Theme-sensitive overlay */
    body::before {
      content:""; position:fixed; inset:0; z-index:-1;
      background: url('https://upload.wikimedia.org/wikipedia/commons/0/0e/Epiphyllum_oxypetalum_%28flower%29.jpg') center/cover no-repeat fixed;
      opacity:.05; transition: opacity .5s;
    }
    body.dark-mode::before {
      background: radial-gradient(ellipse at center, rgba(168,69,101,.1) 0%, rgba(26,26,29,1) 100%);
    }

    /* Heading */
    h1 { ... } /* same as before */
    .tagline { ... }

    /* Story container */
    #story-container {
      max-width:700px; margin:20px auto;
      padding:20px;
      background:#fff; color:#111;
      border-radius:8px; box-shadow:0 0 8px rgba(0,0,0,.1);
      min-height:250px; opacity:0;
      transition: border-color .5s;
    }
    body.dark-mode #story-container {
      background:#2e2e2e; color:#eaeaea;
    }

    /* Rose-edge for special pages */
    .rose-border {
      border: 4px solid #a84565;
    }

    /* Special Title */
    .special-title { ... }

    /* Controls, music, visualizer, etc. */
    /* Add a border glow when audio plays */
    #music-player.playing {
      box-shadow: 0 0 10px #a84565;
    }
    #visualizer .bar { ... }
  </style>
</head>
<body class="light-mode">
  <div id="petal-bg"></div>
  <h1>A Season Spent Loving You</h1>
  <div class="tagline">Letters written when the world was asleep</div>
  <div id="progress"></div>
  <div id="page-selector">Jump to: <select id="page-select"></select></div>
  <div id="story-container"></div>

  <div id="controls">
    <!-- buttons and toggles -->
  </div>

  <div id="music-player">
    <div id="visualizer"><!-- bars here --></div>
    ðŸŽµ Now Playing: <span id="current-song">None</span><br/>
    <audio id="audio"></audio>
    <div id="playlist"></div>
  </div>
  <script>
    // Fetch + typewriter + border logic
    // audio + play/pause glow

    // On showPage(), after typing, do:
    if(special[page]) {
      story.classList.add('rose-border');
    } else {
      story.classList.remove('rose-border');
    }

    // In play(i):
    musicPlayer.classList.add('playing');
    audio.onpause = () => musicPlayer.classList.remove('playing');
  </script>
</body>
</html>
